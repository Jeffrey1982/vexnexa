{
  "framework": "nextjs",
  "regions": ["fra1"],

  "build": {
    "env": {
      "PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD": "1"
    }
  },

  "env": {
    "ALLOW_MOCK_A11Y": "false",
    "A11Y_TIMEOUT_MS": "45000",
    "NEXT_TELEMETRY_DISABLED": "1"
  },

  "functions": {
    "src/app/api/scan*/route.*": {
      "maxDuration": 60
    },
    "src/app/api/white-label/upload/route.*": {
      "maxDuration": 30
    },
    "src/app/api/white-label/route.*": {
      "maxDuration": 30
    },
    "src/app/api/cron/scheduled-scans/route.*": {
      "maxDuration": 300
    },
    "src/app/api/cron/assurance-scans/route.*": {
      "maxDuration": 300
    },
    "src/app/api/cron/cleanup-old-reports/route.*": {
      "maxDuration": 60
    },
    "src/app/api/cron/ingest-gsc/route.*": {
      "maxDuration": 60
    },
    "src/app/api/cron/ingest-ga4/route.*": {
      "maxDuration": 60
    },
    "src/app/api/cron/ingest-pagespeed/route.*": {
      "maxDuration": 300
    },
    "src/app/api/cron/compute-score/route.*": {
      "maxDuration": 60
    },
    "src/app/api/cron/run-alerts/route.*": {
      "maxDuration": 30
    }
  },

  "crons": [
    {
      "path": "/api/cron/scheduled-scans",
      "schedule": "0 0 * * *"
    },
    {
      "path": "/api/cron/assurance-scans",
      "schedule": "0 9 * * *"
    },
    {
      "path": "/api/cron/cleanup-old-reports",
      "schedule": "0 1 1 * *"
    },
    {
      "path": "/api/cron/ingest-gsc",
      "schedule": "0 2 * * *"
    },
    {
      "path": "/api/cron/ingest-ga4",
      "schedule": "15 2 * * *"
    },
    {
      "path": "/api/cron/ingest-pagespeed",
      "schedule": "0 3 * * *"
    },
    {
      "path": "/api/cron/compute-score",
      "schedule": "30 2 * * *"
    },
    {
      "path": "/api/cron/run-alerts",
      "schedule": "45 2 * * *"
    }
  ]
}
